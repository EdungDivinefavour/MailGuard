<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MailGuard - DLP Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <div class="header">
        <h1>üõ°Ô∏è MailGuard - DLP Dashboard</h1>
        <p>Data Leakage Prevention Proxy - Monitor and manage intercepted emails</p>
    </div>

    <div class="container">
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <h3>Total Emails</h3>
                <div class="value" id="statTotal">-</div>
            </div>
            <div class="stat-card flagged">
                <h3>Flagged</h3>
                <div class="value" id="statFlagged">-</div>
            </div>
            <div class="stat-card blocked">
                <h3>Blocked</h3>
                <div class="value" id="statBlocked">-</div>
            </div>
            <div class="stat-card quarantined">
                <h3>Quarantined</h3>
                <div class="value" id="statQuarantined">-</div>
            </div>
            <div class="stat-card">
                <h3>Avg Processing (ms)</h3>
                <div class="value" id="statAvgTime">-</div>
            </div>
        </div>

        <div class="filters">
            <label>
                <input type="checkbox" id="flaggedOnly"> Flagged only
            </label>
            <label>
                Status:
                <select id="statusFilter">
                    <option value="">All</option>
                    <option value="processed">Processed</option>
                    <option value="blocked">Blocked</option>
                    <option value="quarantined">Quarantined</option>
                    <option value="error">Error</option>
                </select>
            </label>
            <button onclick="loadStats(); return false;">Refresh Stats</button>
        </div>

        <div class="emails-table">
            <div id="loading" class="loading">Loading emails...</div>
            <div id="error" class="error" style="display: none;"></div>
            <table id="emailsTable" style="display: none;">
                <thead>
                    <tr>
                        <th>Timestamp</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Subject</th>
                        <th>Status</th>
                        <th>Policy</th>
                        <th>Detections</th>
                        <th>Attachments</th>
                        <th>Time (ms)</th>
                    </tr>
                </thead>
                <tbody id="emailsBody">
                </tbody>
            </table>
            <div class="pagination" id="pagination" style="display: none;">
                <button id="prevPage" onclick="changePage(-1, event); return false;">Previous</button>
                <span id="pageInfo">Page 1 of 1</span>
                <button id="nextPage" onclick="changePage(1, event); return false;">Next</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>

</html>